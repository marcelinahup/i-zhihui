function buildOne(a,b){var c=fs.readFileSync(a,"utf8"),d=jsp.parse(c);d=pro.ast_mangle(d),d=pro.ast_squeeze(d);var e=pro.gen_code(d);fs.writeFileSync(b,e,"utf8")}function scanFolderCompress(a,b){console.log("=========================压缩开发=========================="),console.log(""),console.log("===-- 扫描"+a+"，压缩文件 --==="),console.log("");var c=[],d=[],e=a,f=function(c,d,e){files=fs.readdirSync(c),files.forEach(function(g){var h=c+"/"+g,i=fs.statSync(h);if(i.isDirectory()){e.push(h);var j=h.replace(a,b);fs.existsSync(j)||(fs.mkdirSync(j),console.log("成功创建目录"+j)),f(h,d,e)}else{d.push(h),console.log("扫描到文件："+h);var j=h.replace(a,b),k=j.substring(0,j.lastIndexOf(".js"))+".min.js";console.log("压缩生成指定文件："+k),buildOne(h,k)}})};f(e,c,d),console.log(""),console.log("=========================压缩完成==========================")}function main(a){scanFolderCompress(a[0],a[1])}var fs=require("fs"),jsp=require("./uglify-js").parser,pro=require("./uglify-js").uglify;main(process.argv.slice(2))